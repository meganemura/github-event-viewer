(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

var ghUrl = "https://github.com/";
var ghApiEndpoint = "https://api.github.com/";

var initialRepositories = ["babel/babel", "bower/bower", "bundler/bundler", "gulpjs/gulp", "lhorie/mithril.js", "npm/npm", "rails/rails"];
var initialRepository = initialRepositories[Math.floor(initialRepositories.length * Math.random())];

// Model
var GitHubEvent = {};
GitHubEvent.repositoryEvents = function (owner_and_repo) {
  return m.request({ dataType: "jsonp", url: ghApiEndpoint + "repos/" + owner_and_repo + "/events", background: true });
};

// Username with gravatar
var UserName = {
  view: function view(ctrl, args) {
    return m('a', { href: ghUrl + args.event.actor.login }, [m('img', { src: args.event.actor.avatar_url, width: 20, "class": 'img-rounded', hspace: 6 }), args.event.actor.login, ' ']);
  }
};

var CreateEvent = {
  view: function view(ctrl, args) {
    return m('span', [m.component(UserName, { event: args.event }), "created ", args.event.payload.ref_type, " ", m('a', { href: ghUrl + args.event.repo.name + "/tree/" + args.event.payload.ref }, args.event.payload.ref)]);
  }
};

var DeleteEvent = {
  view: function view(ctrl, args) {
    return m('span', [m.component(UserName, { event: args.event }), "deleted ", args.event.payload.ref_type, " ", args.event.payload.ref]);
  }
};

var ForkEvent = {
  view: function view(ctrl, args) {
    return m('span', [m.component(UserName, { event: args.event }), "forked"]);
  }
};

var GollumEvent = {
  view: function view(ctrl, args) {
    return m('span', [m.component(UserName, { event: args.event }), args.event.payload.pages.map(function (page) {
      return [page.action, ' ', m('a', { href: ghUrl + page.html_url }, page.title)];
    })]);
  }
};

var IssueCommentEvent = {
  view: function view(ctrl, args) {
    return m('span', [m.component(UserName, { event: args.event }), ' commented on issue ', m('a', { href: args.event.payload.comment.html_url }, ['#', args.event.payload.issue.number])]);
  }
};

var IssuesEvent = {
  view: function view(ctrl, args) {
    return m('span', [m.component(UserName, { event: args.event }), ' ', args.event.payload.action, ' issue ', m('a', { href: args.event.payload.issue.html_url }, ['#', args.event.payload.issue.number])]);
  }
};

var PullRequestEvent = {
  view: function view(ctrl, args) {
    return m('span', [m.component(UserName, { event: args.event }), ' ', args.event.payload.action, ' pull request ', m('a', { href: args.event.payload.pull_request.html_url }, ['#', args.event.payload.pull_request.number])]);
  }
};

var PullRequestReviewCommentEvent = {
  view: function view(ctrl, args) {
    return m('span', [m.component(UserName, { event: args.event }), ' commented on pull request ', m('a', { href: args.event.payload.comment.html_url }, ['#', args.event.payload.pull_request.number])]);
  }
};

var PushEvent = {
  view: function view(ctrl, args) {
    var numOfCommits = args.event.payload.commits.length;
    return m('span', [m.component(UserName, { event: args.event }), ' pushed ', numOfCommits.toString(), ' commit' + (numOfCommits == 1 ? '' : 's')]);
  }
};

var WatchEvent = {
  view: function view(ctrl, args) {
    return m('span', [m.component(UserName, { event: args.event }), "starred"]);
  }
};

var EventIcon = {
  view: function view(ctrl, args) {
    return m('span', {
      "class": 'octicon ' + this.octiconClass(args.event.type),
      title: args.event.type,
      'text-align': 'center'
    });
  },

  octiconClass: function octiconClass(type) {
    switch (type) {
      case 'CreateEvent':
        return 'octicon-git-branch';
      case 'DeleteEvent':
        return 'octicon-trashcan';
      case 'ForkEvent':
        return 'octicon-repo-forked';
      case 'GollumEvent':
        return 'octicon-book';
      case 'IssueCommentEvent':
        return 'octicon-comment-discussion';
      case 'IssuesEvent':
        return 'octicon-issue-opened'; // TODO: open/close
      case 'PullRequestEvent':
        return 'octicon-git-pull-request';
      case 'PullRequestReviewCommentEvent':
        return 'octicon-comment-discussion';
      case 'PushEvent':
        return 'octicon-repo-push';
      case 'WatchEvent':
        return 'octicon-star';
      default:
        return 'octicon-question';
    }
  }
};

var RepositoryInputComponent = {
  view: function view() {
    return m('div', { "class": 'jumbotron' }, [m('h2', m('a', { href: '.', style: 'text-decoration: none; color: black' }, ['GitHub', m('span', { "class": 'mega-octicon octicon-mark-github', style: 'padding: 8px' }), 'Event Viewer'])), m('h3', ['github.com/', m('input', {
      placeholder: 'owner/repo',
      onchange: m.withAttr('value', vm.text),
      value: vm.text(),
      autofocus: true,
      onfocus: function onfocus(e) {
        if (e) {
          e.target.select();
        }
      },
      onkeydown: function onkeydown(e) {
        if (e.keyCode == 13) {
          vm.fetchEvents();
        } else {
          m.redraw.strategy("none");
        }
      }
    })]), m('p'), m('button', { onclick: vm.fetchEvents, "class": 'btn btn-lg btn-default' }, 'view')]);
  }
};

var RepositoryInformationComponent = {
  view: function view() {
    if (!$.isEmptyObject(vm.meta()) && vm.meta().status != 200) {
      return m('div', { "class": 'text-danger' }, "Something wrong");
    }
    return m('div', [vm.fetchedRepository() !== "" ? m('span', { "class": 'octicon octicon-repo', style: 'padding: 8px' }) : "", m('a', { href: ghUrl + vm.fetchedRepository() }, [vm.fetchedRepository()])]);
  }
};

var SpinnerComponent = {
  view: function view() {
    if (!vm.isLoading()) {
      return m('span');
    }
    return m('div', { "class": 'sk-three-bounce' }, [[1, 2, 3].map(function (i) {
      return m('div', { "class": "sk-child sk-bounce" + i });
    })]);
  }
};

var EventListComponent = {
  view: function view() {
    return m('table', { "class": 'table table-condensed' }, [m('tbody', vm.events().map(function (event) {
      var created_at = moment(event.created_at);
      return m('tr', [m('td', { align: 'center', "class": 'onepx' }, m.component(EventIcon, { event: event })), m('td', [vm.dispatchEvent(event), ' ', m('small', { "class": 'text-muted', title: created_at.toString() }, moment(event.created_at).fromNow())])]);
    }))]);
  }
};

var FooterComponent = {
  view: function view() {
    return m('div', [m('hr'), m('p', { "class": 'text-muted' }, [vm.rateLimit()]), m('p', { align: 'right' }, [m('span', { "class": 'octicon octicon-repo', style: 'padding: 8px', onclick: function onclick() {
        vm.text('meganemura/github-event-viewer');
      } }), m('a', { href: 'https://github.com/meganemura/github-event-viewer' }, ['meganemura/github-event-viewer'])])]);
  }
};

var vm = {
  init: function init() {
    vm.isLoading = m.prop(false);
    vm.text = m.prop(initialRepository);
    vm.fetchedRepository = m.prop("");
    vm.fetchEvents = function () {
      vm.isLoading(true);
      vm.events([]);
      GitHubEvent.repositoryEvents(vm.text()).then(function (data) {

        console.log(data); // for dev
        vm.meta(data.meta); // for dev

        if (data.meta["X-RateLimit-Remaining"] == '0') {
          vm.events([]);
        } else {
          vm.events(data.data);
        }
      }).then(function () {
        vm.isLoading(false);
      }).then(m.redraw);

      vm.fetchedRepository(vm.text());
    };
    vm.events = m.prop([]);

    vm.dispatchEvent = function (event) {
      switch (event.type) {
        case 'CreateEvent':
          return m.component(CreateEvent, { event: event });
        case 'DeleteEvent':
          return m.component(DeleteEvent, { event: event });
        case 'ForkEvent':
          return m.component(ForkEvent, { event: event });
        case 'GollumEvent':
          return m.component(GollumEvent, { event: event });
        case 'IssueCommentEvent':
          return m.component(IssueCommentEvent, { event: event });
        case 'IssuesEvent':
          return m.component(IssuesEvent, { event: event });
        case 'PullRequestEvent':
          return m.component(PullRequestEvent, { event: event });
        case 'PullRequestReviewCommentEvent':
          return m.component(PullRequestReviewCommentEvent, { event: event });
        case 'PushEvent':
          return m.component(PushEvent, { event: event });
        case 'WatchEvent':
          return m.component(WatchEvent, { event: event });
        default:
          return [m.component(UserName, { event: event }), m('span', { "class": 'text-muted' }, ["('", event.type, "' Not Implemented)"])];
      }
    };

    vm.meta = m.prop({});
    vm.rateLimit = function () {
      if ($.isEmptyObject(this.meta())) {
        return;
      }

      var reset_at = parseInt(this.meta()["X-RateLimit-Reset"] || 0);
      return [m('a', { href: 'https://developer.github.com/v3/#rate-limiting' }, "API Rate Limit"), ": ", this.meta()["X-RateLimit-Remaining"], "/", this.meta()["X-RateLimit-Limit"], " (Reset at: ", moment.unix(reset_at).toString(), ")"];
    };
  }
};

var RootComponent = {
  controller: function controller() {
    vm.init();
    // vm.fetchEvents(); // for dev
  },
  view: function view() {
    return [m.component(RepositoryInputComponent), m.component(RepositoryInformationComponent), m.component(SpinnerComponent), m.component(EventListComponent), m.component(FooterComponent)];
  }
};

m.mount(document.getElementById('root'), RootComponent);

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvbWVnYW5lbXVyYS9zcmMvZ2l0aHViLmNvbS9tZWdhbmVtdXJhL2dpdGh1Yi1ldmVudC12aWV3ZXIvc3JjL2luZGV4LmVzNiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsSUFBSSxLQUFLLEdBQUcscUJBQXFCLENBQUE7QUFDakMsSUFBSSxhQUFhLEdBQUcseUJBQXlCLENBQUE7O0FBRTdDLElBQUksbUJBQW1CLEdBQUcsQ0FDeEIsYUFBYSxFQUNiLGFBQWEsRUFDYixpQkFBaUIsRUFDakIsYUFBYSxFQUNiLG1CQUFtQixFQUNuQixTQUFTLEVBQ1QsYUFBYSxDQUNkLENBQUE7QUFDRCxJQUFJLGlCQUFpQixHQUFHLG1CQUFtQixDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsbUJBQW1CLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUE7OztBQUduRyxJQUFJLFdBQVcsR0FBRyxFQUFFLENBQUE7QUFDcEIsV0FBVyxDQUFDLGdCQUFnQixHQUFHLFVBQVMsY0FBYyxFQUFFO0FBQ3RELFNBQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFDLFFBQVEsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLGFBQWEsR0FBRyxRQUFRLEdBQUcsY0FBYyxHQUFHLFNBQVMsRUFBRSxVQUFVLEVBQUUsSUFBSSxFQUFDLENBQUMsQ0FBQztDQUNySCxDQUFDOzs7QUFJRixJQUFJLFFBQVEsR0FBRztBQUNiLE1BQUksRUFBRSxjQUFTLElBQUksRUFBRSxJQUFJLEVBQUU7QUFDekIsV0FBTyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUMsSUFBSSxFQUFFLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUMsRUFBRSxDQUNwRCxDQUFDLENBQUMsS0FBSyxFQUFFLEVB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dCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwidmFyIGdoVXJsID0gXCJodHRwczovL2dpdGh1Yi5jb20vXCJcbnZhciBnaEFwaUVuZHBvaW50ID0gXCJodHRwczovL2FwaS5naXRodWIuY29tL1wiXG5cbnZhciBpbml0aWFsUmVwb3NpdG9yaWVzID0gW1xuICBcImJhYmVsL2JhYmVsXCIsXG4gIFwiYm93ZXIvYm93ZXJcIixcbiAgXCJidW5kbGVyL2J1bmRsZXJcIixcbiAgXCJndWxwanMvZ3VscFwiLFxuICBcImxob3JpZS9taXRocmlsLmpzXCIsXG4gIFwibnBtL25wbVwiLFxuICBcInJhaWxzL3JhaWxzXCIsXG5dXG52YXIgaW5pdGlhbFJlcG9zaXRvcnkgPSBpbml0aWFsUmVwb3NpdG9yaWVzW01hdGguZmxvb3IoaW5pdGlhbFJlcG9zaXRvcmllcy5sZW5ndGggKiBNYXRoLnJhbmRvbSgpKV1cblxuLy8gTW9kZWxcbnZhciBHaXRIdWJFdmVudCA9IHt9XG5HaXRIdWJFdmVudC5yZXBvc2l0b3J5RXZlbnRzID0gZnVuY3Rpb24ob3duZXJfYW5kX3JlcG8pIHtcbiAgcmV0dXJuIG0ucmVxdWVzdCh7ZGF0YVR5cGU6IFwianNvbnBcIiwgdXJsOiBnaEFwaUVuZHBvaW50ICsgXCJyZXBvcy9cIiArIG93bmVyX2FuZF9yZXBvICsgXCIvZXZlbnRzXCIsIGJhY2tncm91bmQ6IHRydWV9KTtcbn07XG5cblxuLy8gVXNlcm5hbWUgd2l0aCBncmF2YXRhclxudmFyIFVzZXJOYW1lID0ge1xuICB2aWV3OiBmdW5jdGlvbihjdHJsLCBhcmdzKSB7XG4gICAgcmV0dXJuIG0oJ2EnLCB7aHJlZjogZ2hVcmwgKyBhcmdzLmV2ZW50LmFjdG9yLmxvZ2lufSwgW1xuICAgICAgbSgnaW1nJywge3NyYzogYXJncy5ldmVudC5hY3Rvci5hdmF0YXJfdXJsLCB3aWR0aDogMjAsIGNsYXNzOiAnaW1nLXJvdW5kZWQnLCBoc3BhY2U6IDZ9KSxcbiAgICAgIGFyZ3MuZXZlbnQuYWN0b3IubG9naW4sXG4gICAgICAnICcsXG4gICAgXSk7XG4gIH0sXG59XG5cbnZhciBDcmVhdGVFdmVudCA9IHtcbiAgdmlldzogZnVuY3Rpb24oY3RybCwgYXJncykge1xuICAgIHJldHVybiBtKCdzcGFuJywgW1xuICAgICAgbS5jb21wb25lbnQoVXNlck5hbWUsIHtldmVudDogYXJncy5ldmVudH0pLFxuICAgICAgXCJjcmVhdGVkIFwiLFxuICAgICAgYXJncy5ldmVudC5wYXlsb2FkLnJlZl90eXBlLFxuICAgICAgXCIgXCIsXG4gICAgICBtKCdhJywge2hyZWY6IGdoVXJsICsgYXJncy5ldmVudC5yZXBvLm5hbWUgKyBcIi90cmVlL1wiICsgYXJncy5ldmVudC5wYXlsb2FkLnJlZn0sIGFyZ3MuZXZlbnQucGF5bG9hZC5yZWYpLFxuICAgIF0pXG4gIH0sXG59XG5cbnZhciBEZWxldGVFdmVudCA9IHtcbiAgdmlldzogZnVuY3Rpb24oY3RybCwgYXJncykge1xuICAgIHJldHVybiBtKCdzcGFuJywgW1xuICAgICAgbS5jb21wb25lbnQoVXNlck5hbWUsIHtldmVudDogYXJncy5ldmVudH0pLFxuICAgICAgXCJkZWxldGVkIFwiLFxuICAgICAgYXJncy5ldmVudC5wYXlsb2FkLnJlZl90eXBlLFxuICAgICAgXCIgXCIsXG4gICAgICBhcmdzLmV2ZW50LnBheWxvYWQucmVmLFxuICAgIF0pXG4gIH0sXG59XG5cbnZhciBGb3JrRXZlbnQgPSB7XG4gIHZpZXc6IGZ1bmN0aW9uKGN0cmwsIGFyZ3MpIHtcbiAgICByZXR1cm4gbSgnc3BhbicsIFtcbiAgICAgIG0uY29tcG9uZW50KFVzZXJOYW1lLCB7ZXZlbnQ6IGFyZ3MuZXZlbnR9KSxcbiAgICAgIFwiZm9ya2VkXCIsXG4gICAgXSlcbiAgfSxcbn1cblxudmFyIEdvbGx1bUV2ZW50ID0ge1xuICB2aWV3OiBmdW5jdGlvbihjdHJsLCBhcmdzKSB7XG4gICAgcmV0dXJuIG0oJ3NwYW4nLCBbXG4gICAgICBtLmNvbXBvbmVudChVc2VyTmFtZSwge2V2ZW50OiBhcmdzLmV2ZW50fSksXG4gICAgICBhcmdzLmV2ZW50LnBheWxvYWQucGFnZXMubWFwKGZ1bmN0aW9uKHBhZ2UpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICBwYWdlLmFjdGlvbixcbiAgICAgICAgICAnICcsXG4gICAgICAgICAgbSgnYScsIHtocmVmOiBnaFVybCArIHBhZ2UuaHRtbF91cmx9LCBwYWdlLnRpdGxlKSxcbiAgICAgICAgXTtcbiAgICAgIH0pLFxuICAgIF0pXG4gIH0sXG59XG5cbnZhciBJc3N1ZUNvbW1lbnRFdmVudCA9IHtcbiAgdmlldzogZnVuY3Rpb24oY3RybCwgYXJncykge1xuICAgIHJldHVybiBtKCdzcGFuJywgW1xuICAgICAgbS5jb21wb25lbnQoVXNlck5hbWUsIHtldmVudDogYXJncy5ldmVudH0pLFxuICAgICAgJyBjb21tZW50ZWQgb24gaXNzdWUgJyxcbiAgICAgIG0oJ2EnLCB7aHJlZjogYXJncy5ldmVudC5wYXlsb2FkLmNvbW1lbnQuaHRtbF91cmx9LCBbXG4gICAgICAgICcjJyxcbiAgICAgICAgYXJncy5ldmVudC5wYXlsb2FkLmlzc3VlLm51bWJlcixcbiAgICAgIF0pLFxuICAgIF0pXG4gIH0sXG59XG5cbnZhciBJc3N1ZXNFdmVudCA9IHtcbiAgdmlldzogZnVuY3Rpb24oY3RybCwgYXJncykge1xuICAgIHJldHVybiBtKCdzcGFuJywgW1xuICAgICAgbS5jb21wb25lbnQoVXNlck5hbWUsIHtldmVudDogYXJncy5ldmVudH0pLFxuICAgICAgJyAnLFxuICAgICAgYXJncy5ldmVudC5wYXlsb2FkLmFjdGlvbixcbiAgICAgICcgaXNzdWUgJyxcbiAgICAgIG0oJ2EnLCB7aHJlZjogYXJncy5ldmVudC5wYXlsb2FkLmlzc3VlLmh0bWxfdXJsfSwgW1xuICAgICAgICAnIycsXG4gICAgICAgIGFyZ3MuZXZlbnQucGF5bG9hZC5pc3N1ZS5udW1iZXIsXG4gICAgICBdKSxcbiAgICBdKVxuICB9LFxufVxuXG52YXIgUHVsbFJlcXVlc3RFdmVudCA9IHtcbiAgdmlldzogZnVuY3Rpb24oY3RybCwgYXJncykge1xuICAgIHJldHVybiBtKCdzcGFuJywgW1xuICAgICAgbS5jb21wb25lbnQoVXNlck5hbWUsIHtldmVudDogYXJncy5ldmVudH0pLFxuICAgICAgJyAnLFxuICAgICAgYXJncy5ldmVudC5wYXlsb2FkLmFjdGlvbixcbiAgICAgICcgcHVsbCByZXF1ZXN0ICcsXG4gICAgICBtKCdhJywge2hyZWY6IGFyZ3MuZXZlbnQucGF5bG9hZC5wdWxsX3JlcXVlc3QuaHRtbF91cmx9LCBbXG4gICAgICAgICcjJyxcbiAgICAgICAgYXJncy5ldmVudC5wYXlsb2FkLnB1bGxfcmVxdWVzdC5udW1iZXIsXG4gICAgICBdKSxcbiAgICBdKVxuICB9LFxufVxuXG52YXIgUHVsbFJlcXVlc3RSZXZpZXdDb21tZW50RXZlbnQgPSB7XG4gIHZpZXc6IGZ1bmN0aW9uKGN0cmwsIGFyZ3MpIHtcbiAgICByZXR1cm4gbSgnc3BhbicsIFtcbiAgICAgIG0uY29tcG9uZW50KFVzZXJOYW1lLCB7ZXZlbnQ6IGFyZ3MuZXZlbnR9KSxcbiAgICAgICcgY29tbWVudGVkIG9uIHB1bGwgcmVxdWVzdCAnLFxuICAgICAgbSgnYScsIHtocmVmOiBhcmdzLmV2ZW50LnBheWxvYWQuY29tbWVudC5odG1sX3VybH0sIFtcbiAgICAgICAgJyMnLFxuICAgICAgICBhcmdzLmV2ZW50LnBheWxvYWQucHVsbF9yZXF1ZXN0Lm51bWJlcixcbiAgICAgIF0pLFxuICAgIF0pXG4gIH0sXG59XG5cbnZhciBQdXNoRXZlbnQgPSB7XG4gIHZpZXc6IGZ1bmN0aW9uKGN0cmwsIGFyZ3MpIHtcbiAgICB2YXIgbnVtT2ZDb21taXRzID0gYXJncy5ldmVudC5wYXlsb2FkLmNvbW1pdHMubGVuZ3RoO1xuICAgIHJldHVybiBtKCdzcGFuJywgW1xuICAgICAgbS5jb21wb25lbnQoVXNlck5hbWUsIHtldmVudDogYXJncy5ldmVudH0pLFxuICAgICAgJyBwdXNoZWQgJyxcbiAgICAgIG51bU9mQ29tbWl0cy50b1N0cmluZygpLFxuICAgICAgJyBjb21taXQnICsgKChudW1PZkNvbW1pdHMgPT0gMSkgPyAnJyA6ICdzJyksXG4gICAgXSlcbiAgfSxcbn1cblxudmFyIFdhdGNoRXZlbnQgPSB7XG4gIHZpZXc6IGZ1bmN0aW9uKGN0cmwsIGFyZ3MpIHtcbiAgICByZXR1cm4gbSgnc3BhbicsIFtcbiAgICAgIG0uY29tcG9uZW50KFVzZXJOYW1lLCB7ZXZlbnQ6IGFyZ3MuZXZlbnR9KSxcbiAgICAgIFwic3RhcnJlZFwiLFxuICAgIF0pXG4gIH0sXG59XG5cbnZhciBFdmVudEljb24gPSB7XG4gIHZpZXc6IGZ1bmN0aW9uKGN0cmwsIGFyZ3MpIHtcbiAgICByZXR1cm4gbSgnc3BhbicsIHtcbiAgICAgIGNsYXNzOiAnb2N0aWNvbiAnICsgdGhpcy5vY3RpY29uQ2xhc3MoYXJncy5ldmVudC50eXBlKSxcbiAgICAgIHRpdGxlOiBhcmdzLmV2ZW50LnR5cGUsXG4gICAgICAndGV4dC1hbGlnbic6ICdjZW50ZXInLFxuICAgIH0pO1xuICB9LFxuXG4gIG9jdGljb25DbGFzczogZnVuY3Rpb24odHlwZSkge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAnQ3JlYXRlRXZlbnQnOiAgICAgICAgICAgICAgICAgICByZXR1cm4gJ29jdGljb24tZ2l0LWJyYW5jaCc7XG4gICAgICBjYXNlICdEZWxldGVFdmVudCc6ICAgICAgICAgICAgICAgICAgIHJldHVybiAnb2N0aWNvbi10cmFzaGNhbic7XG4gICAgICBjYXNlICdGb3JrRXZlbnQnOiAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnb2N0aWNvbi1yZXBvLWZvcmtlZCc7XG4gICAgICBjYXNlICdHb2xsdW1FdmVudCc6ICAgICAgICAgICAgICAgICAgIHJldHVybiAnb2N0aWNvbi1ib29rJztcbiAgICAgIGNhc2UgJ0lzc3VlQ29tbWVudEV2ZW50JzogICAgICAgICAgICAgcmV0dXJuICdvY3RpY29uLWNvbW1lbnQtZGlzY3Vzc2lvbic7XG4gICAgICBjYXNlICdJc3N1ZXNFdmVudCc6ICAgICAgICAgICAgICAgICAgIHJldHVybiAnb2N0aWNvbi1pc3N1ZS1vcGVuZWQnOyAgLy8gVE9ETzogb3Blbi9jbG9zZVxuICAgICAgY2FzZSAnUHVsbFJlcXVlc3RFdmVudCc6ICAgICAgICAgICAgICByZXR1cm4gJ29jdGljb24tZ2l0LXB1bGwtcmVxdWVzdCc7XG4gICAgICBjYXNlICdQdWxsUmVxdWVzdFJldmlld0NvbW1lbnRFdmVudCc6IHJldHVybiAnb2N0aWNvbi1jb21tZW50LWRpc2N1c3Npb24nO1xuICAgICAgY2FzZSAnUHVzaEV2ZW50JzogICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ29jdGljb24tcmVwby1wdXNoJztcbiAgICAgIGNhc2UgJ1dhdGNoRXZlbnQnOiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdvY3RpY29uLXN0YXInO1xuICAgICAgZGVmYXVsdDogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ29jdGljb24tcXVlc3Rpb24nO1xuICAgIH1cbiAgfSxcbn1cblxudmFyIFJlcG9zaXRvcnlJbnB1dENvbXBvbmVudCA9IHtcbiAgdmlldzogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG0oJ2RpdicsIHtjbGFzczogJ2p1bWJvdHJvbid9LCBbXG4gICAgICBtKCdoMicsIG0oJ2EnLCB7aHJlZjogJy4nLCBzdHlsZTogJ3RleHQtZGVjb3JhdGlvbjogbm9uZTsgY29sb3I6IGJsYWNrJyB9LCBbXG4gICAgICAgICdHaXRIdWInLFxuICAgICAgICBtKCdzcGFuJywge2NsYXNzOiAnbWVnYS1vY3RpY29uIG9jdGljb24tbWFyay1naXRodWInLCBzdHlsZTogJ3BhZGRpbmc6IDhweCd9KSxcbiAgICAgICAgJ0V2ZW50IFZpZXdlcicsXG4gICAgICBdKSksXG4gICAgICBtKCdoMycsIFtcbiAgICAgICAgJ2dpdGh1Yi5jb20vJyxcbiAgICAgICAgbSgnaW5wdXQnLCB7XG4gICAgICAgICAgcGxhY2Vob2xkZXI6ICdvd25lci9yZXBvJyxcbiAgICAgICAgICBvbmNoYW5nZTogbS53aXRoQXR0cigndmFsdWUnLCB2bS50ZXh0KSxcbiAgICAgICAgICB2YWx1ZTogdm0udGV4dCgpLFxuICAgICAgICAgIGF1dG9mb2N1czogdHJ1ZSxcbiAgICAgICAgICBvbmZvY3VzOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICBlLnRhcmdldC5zZWxlY3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIG9ua2V5ZG93bjogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykge1xuICAgICAgICAgICAgICB2bS5mZXRjaEV2ZW50cygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbS5yZWRyYXcuc3RyYXRlZ3koXCJub25lXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgXSksXG4gICAgICBtKCdwJyksXG4gICAgICBtKCdidXR0b24nLCB7b25jbGljazogdm0uZmV0Y2hFdmVudHMsIGNsYXNzOiAnYnRuIGJ0bi1sZyBidG4tZGVmYXVsdCd9LCAndmlldycpLFxuICAgIF0pO1xuICB9LFxufVxuXG52YXIgUmVwb3NpdG9yeUluZm9ybWF0aW9uQ29tcG9uZW50ID0ge1xuICB2aWV3OiBmdW5jdGlvbigpIHtcbiAgICBpZiAoISQuaXNFbXB0eU9iamVjdCh2bS5tZXRhKCkpICYmIHZtLm1ldGEoKS5zdGF0dXMgIT0gMjAwKSB7XG4gICAgICByZXR1cm4gbSgnZGl2Jywge2NsYXNzOiAndGV4dC1kYW5nZXInfSwgXCJTb21ldGhpbmcgd3JvbmdcIilcbiAgICB9XG4gICAgcmV0dXJuIG0oJ2RpdicsIFtcbiAgICAgICh2bS5mZXRjaGVkUmVwb3NpdG9yeSgpICE9PSBcIlwiID8gbSgnc3BhbicsIHtjbGFzczogJ29jdGljb24gb2N0aWNvbi1yZXBvJywgc3R5bGU6ICdwYWRkaW5nOiA4cHgnfSkgOiBcIlwiKSxcbiAgICAgIG0oJ2EnLCB7aHJlZjogZ2hVcmwgKyB2bS5mZXRjaGVkUmVwb3NpdG9yeSgpfSwgW1xuICAgICAgICB2bS5mZXRjaGVkUmVwb3NpdG9yeSgpLFxuICAgICAgXSlcbiAgICBdKTtcbiAgfSxcbn1cblxudmFyIFNwaW5uZXJDb21wb25lbnQgPSB7XG4gIHZpZXc6IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdm0uaXNMb2FkaW5nKCkpIHtcbiAgICAgIHJldHVybiBtKCdzcGFuJylcbiAgICB9XG4gICAgcmV0dXJuIG0oJ2RpdicsIHtjbGFzczogJ3NrLXRocmVlLWJvdW5jZSd9LCBbXG4gICAgICBbMSwgMiwgM10ubWFwKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgcmV0dXJuIG0oJ2RpdicsIHtjbGFzczogXCJzay1jaGlsZCBzay1ib3VuY2VcIiArIGl9KTtcbiAgICAgIH0pXG4gICAgXSlcbiAgfVxufVxuXG52YXIgRXZlbnRMaXN0Q29tcG9uZW50ID0ge1xuICB2aWV3OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbSgndGFibGUnLCB7Y2xhc3M6ICd0YWJsZSB0YWJsZS1jb25kZW5zZWQnfSwgW1xuICAgICAgbSgndGJvZHknLCB2bS5ldmVudHMoKS5tYXAoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgdmFyIGNyZWF0ZWRfYXQgPSBtb21lbnQoZXZlbnQuY3JlYXRlZF9hdClcbiAgICAgICAgcmV0dXJuIG0oJ3RyJywgW1xuICAgICAgICAgIG0oJ3RkJywge2FsaWduOiAnY2VudGVyJywgY2xhc3M6ICdvbmVweCd9LCBtLmNvbXBvbmVudChFdmVudEljb24sIHtldmVudDogZXZlbnR9KSksXG4gICAgICAgICAgbSgndGQnLCBbXG4gICAgICAgICAgICB2bS5kaXNwYXRjaEV2ZW50KGV2ZW50KSxcbiAgICAgICAgICAgICcgJyxcbiAgICAgICAgICAgIG0oJ3NtYWxsJywge2NsYXNzOiAndGV4dC1tdXRlZCcsIHRpdGxlOiBjcmVhdGVkX2F0LnRvU3RyaW5nKCl9LFxuICAgICAgICAgICAgICBtb21lbnQoZXZlbnQuY3JlYXRlZF9hdCkuZnJvbU5vdygpXG4gICAgICAgICAgICAgKSxcbiAgICAgICAgICBdKSxcbiAgICAgICAgXSlcbiAgICAgIH0pKVxuICAgIF0pXG4gIH0sXG59XG5cbnZhciBGb290ZXJDb21wb25lbnQgPSB7XG4gIHZpZXc6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBtKCdkaXYnLCBbXG4gICAgICBtKCdocicpLFxuICAgICAgbSgncCcsIHtjbGFzczogJ3RleHQtbXV0ZWQnfSwgW1xuICAgICAgICB2bS5yYXRlTGltaXQoKSxcbiAgICAgIF0pLFxuICAgICAgbSgncCcsIHthbGlnbjogJ3JpZ2h0J30sIFtcbiAgICAgICAgbSgnc3BhbicsIHtjbGFzczogJ29jdGljb24gb2N0aWNvbi1yZXBvJywgc3R5bGU6ICdwYWRkaW5nOiA4cHgnLCBvbmNsaWNrOiBmdW5jdGlvbigpIHt2bS50ZXh0KCdtZWdhbmVtdXJhL2dpdGh1Yi1ldmVudC12aWV3ZXInKX19KSxcbiAgICAgICAgbSgnYScsIHtocmVmOiAnaHR0cHM6Ly9naXRodWIuY29tL21lZ2FuZW11cmEvZ2l0aHViLWV2ZW50LXZpZXdlcid9LCBbXG4gICAgICAgICAgJ21lZ2FuZW11cmEvZ2l0aHViLWV2ZW50LXZpZXdlcicsXG4gICAgICAgIF0pLFxuICAgICAgXSksXG4gICAgXSlcbiAgfVxufVxuXG5cbnZhciB2bSA9IHtcbiAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgdm0uaXNMb2FkaW5nID0gbS5wcm9wKGZhbHNlKTtcbiAgICB2bS50ZXh0ID0gbS5wcm9wKGluaXRpYWxSZXBvc2l0b3J5KTtcbiAgICB2bS5mZXRjaGVkUmVwb3NpdG9yeSA9IG0ucHJvcChcIlwiKTtcbiAgICB2bS5mZXRjaEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdm0uaXNMb2FkaW5nKHRydWUpO1xuICAgICAgdm0uZXZlbnRzKFtdKTtcbiAgICAgIEdpdEh1YkV2ZW50LnJlcG9zaXRvcnlFdmVudHModm0udGV4dCgpKVxuICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOyAgLy8gZm9yIGRldlxuICAgICAgICB2bS5tZXRhKGRhdGEubWV0YSk7ICAvLyBmb3IgZGV2XG5cbiAgICAgICAgaWYgKGRhdGEubWV0YVtcIlgtUmF0ZUxpbWl0LVJlbWFpbmluZ1wiXSA9PSAnMCcpIHtcbiAgICAgICAgICB2bS5ldmVudHMoW10pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLmV2ZW50cyhkYXRhLmRhdGEpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7IHZtLmlzTG9hZGluZyhmYWxzZSkgfSlcbiAgICAgIC50aGVuKG0ucmVkcmF3KTtcblxuICAgICAgdm0uZmV0Y2hlZFJlcG9zaXRvcnkodm0udGV4dCgpKTtcbiAgICB9O1xuICAgIHZtLmV2ZW50cyA9IG0ucHJvcChbXSk7XG5cbiAgICB2bS5kaXNwYXRjaEV2ZW50ID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuICAgICAgICBjYXNlICdDcmVhdGVFdmVudCc6ICAgICAgICAgICAgICAgICAgIHJldHVybiBtLmNvbXBvbmVudChDcmVhdGVFdmVudCwgICAgICAgICAgICAgICAgICAgIHtldmVudDogZXZlbnR9KVxuICAgICAgICBjYXNlICdEZWxldGVFdmVudCc6ICAgICAgICAgICAgICAgICAgIHJldHVybiBtLmNvbXBvbmVudChEZWxldGVFdmVudCwgICAgICAgICAgICAgICAgICAgIHtldmVudDogZXZlbnR9KVxuICAgICAgICBjYXNlICdGb3JrRXZlbnQnOiAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtLmNvbXBvbmVudChGb3JrRXZlbnQsICAgICAgICAgICAgICAgICAgICAgIHtldmVudDogZXZlbnR9KVxuICAgICAgICBjYXNlICdHb2xsdW1FdmVudCc6ICAgICAgICAgICAgICAgICAgIHJldHVybiBtLmNvbXBvbmVudChHb2xsdW1FdmVudCwgICAgICAgICAgICAgICAgICAgIHtldmVudDogZXZlbnR9KVxuICAgICAgICBjYXNlICdJc3N1ZUNvbW1lbnRFdmVudCc6ICAgICAgICAgICAgIHJldHVybiBtLmNvbXBvbmVudChJc3N1ZUNvbW1lbnRFdmVudCwgICAgICAgICAgICAgIHtldmVudDogZXZlbnR9KVxuICAgICAgICBjYXNlICdJc3N1ZXNFdmVudCc6ICAgICAgICAgICAgICAgICAgIHJldHVybiBtLmNvbXBvbmVudChJc3N1ZXNFdmVudCwgICAgICAgICAgICAgICAgICAgIHtldmVudDogZXZlbnR9KVxuICAgICAgICBjYXNlICdQdWxsUmVxdWVzdEV2ZW50JzogICAgICAgICAgICAgIHJldHVybiBtLmNvbXBvbmVudChQdWxsUmVxdWVzdEV2ZW50LCAgICAgICAgICAgICAgIHtldmVudDogZXZlbnR9KVxuICAgICAgICBjYXNlICdQdWxsUmVxdWVzdFJldmlld0NvbW1lbnRFdmVudCc6IHJldHVybiBtLmNvbXBvbmVudChQdWxsUmVxdWVzdFJldmlld0NvbW1lbnRFdmVudCwgIHtldmVudDogZXZlbnR9KVxuICAgICAgICBjYXNlICdQdXNoRXZlbnQnOiAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtLmNvbXBvbmVudChQdXNoRXZlbnQsICAgICAgICAgICAgICAgICAgICAgIHtldmVudDogZXZlbnR9KVxuICAgICAgICBjYXNlICdXYXRjaEV2ZW50JzogICAgICAgICAgICAgICAgICAgIHJldHVybiBtLmNvbXBvbmVudChXYXRjaEV2ZW50LCAgICAgICAgICAgICAgICAgICAgIHtldmVudDogZXZlbnR9KVxuICAgICAgICBkZWZhdWx0OiByZXR1cm4gW1xuICAgICAgICAgIG0uY29tcG9uZW50KFVzZXJOYW1lLCB7ZXZlbnQ6IGV2ZW50fSksXG4gICAgICAgICAgbSgnc3BhbicsIHtjbGFzczogJ3RleHQtbXV0ZWQnfSwgW1xuICAgICAgICAgICAgXCIoJ1wiLFxuICAgICAgICAgICAgZXZlbnQudHlwZSxcbiAgICAgICAgICAgIFwiJyBOb3QgSW1wbGVtZW50ZWQpXCIsXG4gICAgICAgICAgXSksXG4gICAgICAgIF07XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZtLm1ldGEgPSBtLnByb3Aoe30pO1xuICAgIHZtLnJhdGVMaW1pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCQuaXNFbXB0eU9iamVjdCh0aGlzLm1ldGEoKSkpIHsgcmV0dXJuIH1cblxuICAgICAgdmFyIHJlc2V0X2F0ID0gcGFyc2VJbnQodGhpcy5tZXRhKClbXCJYLVJhdGVMaW1pdC1SZXNldFwiXSB8fCAwKTtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIG0oJ2EnLCB7aHJlZjogJ2h0dHBzOi8vZGV2ZWxvcGVyLmdpdGh1Yi5jb20vdjMvI3JhdGUtbGltaXRpbmcnfSwgXCJBUEkgUmF0ZSBMaW1pdFwiKSxcbiAgICAgICAgXCI6IFwiLFxuICAgICAgICB0aGlzLm1ldGEoKVtcIlgtUmF0ZUxpbWl0LVJlbWFpbmluZ1wiXSxcbiAgICAgICAgXCIvXCIsXG4gICAgICAgIHRoaXMubWV0YSgpW1wiWC1SYXRlTGltaXQtTGltaXRcIl0sXG4gICAgICAgIFwiIChSZXNldCBhdDogXCIsXG4gICAgICAgIG1vbWVudC51bml4KHJlc2V0X2F0KS50b1N0cmluZygpLFxuICAgICAgICBcIilcIixcbiAgICAgIF1cbiAgICB9XG4gIH1cbn07XG5cblxudmFyIFJvb3RDb21wb25lbnQgPSB7XG4gIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCkge1xuICAgIHZtLmluaXQoKTtcbiAgICAvLyB2bS5mZXRjaEV2ZW50cygpOyAvLyBmb3IgZGV2XG4gIH0sXG4gIHZpZXc6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBbXG4gICAgICBtLmNvbXBvbmVudChSZXBvc2l0b3J5SW5wdXRDb21wb25lbnQpLFxuICAgICAgbS5jb21wb25lbnQoUmVwb3NpdG9yeUluZm9ybWF0aW9uQ29tcG9uZW50KSxcbiAgICAgIG0uY29tcG9uZW50KFNwaW5uZXJDb21wb25lbnQpLFxuICAgICAgbS5jb21wb25lbnQoRXZlbnRMaXN0Q29tcG9uZW50KSxcbiAgICAgIG0uY29tcG9uZW50KEZvb3RlckNvbXBvbmVudCksXG4gICAgXTtcbiAgfSxcbn1cblxubS5tb3VudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpLCBSb290Q29tcG9uZW50KTtcbiJdfQ==
